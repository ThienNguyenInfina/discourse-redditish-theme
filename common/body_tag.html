<script type="text/discourse-plugin" version="0.8">
  const user = api.getCurrentUser();

  // user is already logged in, bail
  if (user) {
    return;
  }

  // do your work here...
  const clickCallback = (clickEvent) => {
    console.log(clickEvent);
    console.log('doing something');
    alert("user is logging in");
    // ..
    // ..
  };

  api.onAppEvent("modal:body-shown", (event) => {
    const loginButton = document.querySelector(".login-button");

    if (loginButton) {
      loginButton.addEventListener("click", clickCallback, { once: true });
    }
  });
</script>
